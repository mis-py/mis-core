## Core v2.1.0
#### MIS-89
* Додано `LogManager` через який виконується `setup` логів
* Додавання logger хендлерів тепер відбувається лише через `LogManager`, він зберігає id хендлерів, завдяки чому виконується динамічне редагування логів.
* Додано `VariableCallbackManager` в який додаються функції, які будуть запускатись при редагування певних змінних.
* У компонент `Variables` додано атрибут `observers`, який приймає функції, що будуть реєструватись у `VariableCallbackManager`
#### MIS-188
- Удален файл `scopes.py`, забросил эту разработку
- Исправлен резолв пермишенов у юзера из групп. 
Стоял фильтр который требовал наличие user_id and team_id что не срабатывало т.к. права на team и user это 2 разные записи в бд.
- Добавлены `scopes` для `guardian`, `variables`, `jobs`, `logs`, `notifications`, `teams` в ендпоинты.
- Новые `scopes` добавлены в инициализацию.
- Компонент модулей `Variables` теперь автоматически добавляет для юзера `admin` только `sudo` права модуля.
#### MIS-189
- Перейменовано датаклас `Message` на `EventMessage`, щоб не конфліктувати із `aio_pika` `Message`
- Змінено `ExchangeType` із `FANOUT` на `DIRECT`, щоб використовувати один `exchange` і різні `routing_key`
- Додано зберігання у `Eventory` всіх створених ним `consumers`
- Параметри об'єкта` EventMessage` тепер передаються напряму у метод `publish(...)` і вже там створюється `EventMessage`
- Змінено wrapper для consumer функції
    - тепер він додає аргументи `incoming_message`, `message`, `validated_body` і додаткові аргументи із `extra_kwargs`
    - всі ці аргументи тепер не обов'язкові у функції
    - `validated_body` валідується через pydantic, сама модель вказується через тайпінг `validated_body: DummyResponse`
- Видалено `listener_task` із `Eventory`
#### MIS-193
- Добавлен пакет `cron-converter` для валидации `cron` строк
- Для пайдентик модели `JobTrigger` реализована валидация `cron` строк
#### MIS-194
- Различные правки строк логирования и исключений для большей информативности сообщений
- Рефакторинг создания валидации `trigger`
- Рефакторинг и конвертация `extra_params` через пайдентик модель
- Добавлено сохранение job `name` в базу данных, а так же в схемы
- Небольшой рефакторинг создания контекста и метаданных job, они создаются только если объявлены в таске
- Обертка `job_wrapper` перенесена на уровень компонента из либы
- Фикс ошибки обработки исключения при котором не получалось сериализовать само исключение в `main.py`
- Фикс создания `job` с пустым списком триггеров
#### MIS-197
- Из `tortoise_manager.init` воркфлоу убрана инициализация схемы базы данных, 
поскольку эти действия выполняются миграциями автоматически. 
Логика вынесена в отдельную функцию если она понадобится в будущем.
#### MIS-202
- Добавил логирование текущей версии, типа окружения и путь к файлу окружения при старте проекта.
- Небольшое дополнение к `.gitignore`: системная директория `/docs/.obsidian`, `/logs`, `/envs/prod.env`, `/envs/*local*.env`
- Почищены `config.py` от неактуальных сеттингов
- `URL_ROOT_PATH` переименован в `ROOT_PATH`
- Добавлены `DOCS_URL` и `OPEN_API_URL`
- Почищен `const.py` от неактуальных сеттингов
- Переименована директория `env_override` в `envs`
- Добавлены константы для разных типов ENVIRONMENT
- Добавлен `.env.example` со списокм всех переменных и их описанием
- `ENV_FILE` теперь содержит полный путь к файлу, суффикс `.env` добавляется при инициализации переменной
- Добавлены переменные `DEV_HOST`, `DEV_PORT`, `DEV_LOG_LEVEL` для конфигурирования запуска проекта локально.
- Небольшой трюк для присвоения `LOCAL_ENVIRONMENT` точного значения которое пришло в `ENVIRONMENT` если оно содержит `local`
- Если `ACCESS_TOKEN_EXPIRE_MINUTES` равен 0 то значения истечения будет удаляться из токена.
- Из компонента Variables убрана проверка на прод из логирования. Чтобы не палить переменные не ставьте на проде дебаг лога!
#### MIS-205
- `routing_key_service` и `get_routing_key_subscription_service` перенесены в отдельный файл для предотвращения цикличного импорта
- Возвращена конвертация типов для `job_in.extra` в `create_scheduled_job`
- Добавлен датакласс `JobMeta`: он позволяет получить информацию о текущем джобе в процессе выполнения этого джоба:
`job_id`, `user_id`, `trigger`, `task_name`, `module_id`
- Компонент `ScheduledTasks` переделана логика выявления контекста:
если `task` имеет в аргументах `ctx` и/или `job_meta` то они будут созданы и прокинуты в `kwargs` при запуске инстанса `job`
- В `TaskTemplate` для `trigger` добавлен тип `OrTrigger` чтобы можно было заранее указать список триггеров для `task`
- `Schedulery`: в вывод лога добавлены `job_id`
#### MIS-208
- `ShedulerService`, `ModuleService`, `VariableService` реинтегрированы из `libs` обратно в `core`
- Остатки функционала выделены в самодостаточные библиотеки `Shedulery`
- `variable_service` вынесен в отдельный файл для предотвращения цикличных импортов
- Cервис `scheduled_job_service` переименован в `ShedulerService`. Теперь он отвечает за все взаимодействия `Job`, `Tasks` с либой `Shedulery`
- Убрана пагинация с `variable` роутов
- Сервисы `variable_value` и `variable` объеденены в один
- `core_setup.py` расширен логикой инициализации модулей
- `application` в `BaseComponent` перемещен в `pre_init`
- Из `BaseModule` убраны методы работы с моделью `Module`
- Проверки `state` у `GenericModule` перенесены в `ModuleService`
- Фикс роутов у модулей 
#### MIS-219
* Прибрано `strict=True` при валідуванні variables
* Глобальні variables тепер теж, як і локальні зберігаються в таблиці VariableValue
* Валідація variables при редагуванні тепер відбувається через [TypeAdapter](https://docs.pydantic.dev/latest/api/type_adapter/) 
* Виправлено редагування глобальних variables (спрацьовувала перевірка, яка має працювати лише для локальних)


## Dummy v1.2
#### MIS-89
* У компонент `Variables` додано функцію `change_module_logs` до `observers` на змінну `LOG_LEVEL`
#### MIS-184
* Додано репозиторій і сервіс для `DummyRestricted`
* В `app.py` замінено використання `DummyModel` на `DummyRestrictedModel` для прикладу використання `guardian`
* Виправлено дублювання `GuardianAccessGroup` в `app.py` при кожному запуску проекту
#### MIS-189
- Оновлено виклики `Eventory.publish()`
- Додано в `consumers.py` приклад використання `validated_body`
#### MIS-194
- Пример таски `dummy_manual_task` расширен аргументами с различными базовыми типами


## Binom Companion v0.6
#### MIS-89
* У компонент `Variables` додано функцію `change_module_logs` до `observers` на змінну `LOG_LEVEL`
#### MIS-189
- Оновлено виклики `Eventory.publish()`
#### MIS-205
- Фикс проверки не существующих групп (снова...)
- Проброс `job_meta` для того, чтобы можно было в поле `reason` указать `job_id`


## Proxy registry v0.3
#### MIS-89
* У компонент `Variables` додано функцію `change_module_logs` до `observers` на змінну `LOG_LEVEL`